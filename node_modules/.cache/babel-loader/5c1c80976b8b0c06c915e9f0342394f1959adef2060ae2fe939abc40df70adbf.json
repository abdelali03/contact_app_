{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import{Link,useParams}from\"react-router-dom\";import{getContact}from\"../api/ContactService\";import{toastError,toastSuccess}from\"../api/ToastService\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const ContactDetail=_ref=>{let{updateContact,updateImage}=_ref;const inputRef=useRef();const[contact,setContact]=useState({id:\"\",name:\"\",email:\"\",phone:\"\",address:\"\",title:\"\",status:\"\",photoUrl:\"\"});const{id}=useParams();const fetchContact=async id=>{try{const{data}=await getContact(id);setContact(data);console.log(data);//toastSuccess('Contact retrieved');\n}catch(error){console.log(error);toastError(error.message);}};const selectImage=()=>{inputRef.current.click();};const udpatePhoto=async file=>{try{const formData=new FormData();formData.append(\"file\",file,file.name);formData.append(\"id\",id);await updateImage(formData);setContact(prev=>({...prev,photoUrl:\"\".concat(prev.photoUrl,\"?updated_at=\").concat(new Date().getTime())}));toastSuccess(\"Photo updated\");}catch(error){console.log(error);toastError(error.message);}};const onChange=event=>{setContact({...contact,[event.target.name]:event.target.value});};const onUpdateContact=async event=>{event.preventDefault();await updateContact(contact);fetchContact(id);toastSuccess(\"Contact Updated\");};useEffect(()=>{fetchContact(id);},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Link,{to:\"/contacts\",className:\"link\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-left\"}),\" Back to list\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile__details\",children:[/*#__PURE__*/_jsx(\"img\",{src:contact.photoUrl,alt:\"Profile photo of \".concat(contact.name)}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile__metadata\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"profile__name\",children:contact.name}),/*#__PURE__*/_jsx(\"p\",{className:\"profile__muted\",children:\"JPG, GIF, or PNG. Max size of 10MG\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:selectImage,className:\"btn\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-cloud-upload\"}),\" Change Photo\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"profile__settings\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onUpdateContact,className:\"form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-details\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",defaultValue:contact.id,name:\"id\",required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"details\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:contact.name,onChange:onChange,name:\"name\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"details\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:contact.email,onChange:onChange,name:\"email\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"details\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:contact.phone,onChange:onChange,name:\"phone\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"details\",children:\"Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:contact.address,onChange:onChange,name:\"address\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"details\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:contact.title,onChange:onChange,name:\"title\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"details\",children:\"Status\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:contact.status,onChange:onChange,name:\"status\",required:true})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form_footer\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn\",children:\"Save\"})})]})})})]}),/*#__PURE__*/_jsx(\"form\",{style:{display:\"none\"},children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:inputRef,onChange:event=>udpatePhoto(event.target.files[0]),name:\"file\",accept:\"image/*\"})})]});};export default ContactDetail;","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","useParams","getContact","toastError","toastSuccess","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ContactDetail","_ref","updateContact","updateImage","inputRef","contact","setContact","id","name","email","phone","address","title","status","photoUrl","fetchContact","data","console","log","error","message","selectImage","current","click","udpatePhoto","file","formData","FormData","append","prev","concat","Date","getTime","onChange","event","target","value","onUpdateContact","preventDefault","children","to","className","src","alt","onClick","onSubmit","type","defaultValue","required","style","display","ref","files","accept"],"sources":["C:/Users/dell/Desktop/contactapp-main/src/components/ContactDetail.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport { getContact } from \"../api/ContactService\";\r\nimport { toastError, toastSuccess } from \"../api/ToastService\";\r\n\r\nconst ContactDetail = ({ updateContact, updateImage }) => {\r\n  const inputRef = useRef();\r\n  const [contact, setContact] = useState({\r\n    id: \"\",\r\n    name: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n    address: \"\",\r\n    title: \"\",\r\n    status: \"\",\r\n    photoUrl: \"\",\r\n  });\r\n\r\n  const { id } = useParams();\r\n\r\n  const fetchContact = async (id) => {\r\n    try {\r\n      const { data } = await getContact(id);\r\n      setContact(data);\r\n      console.log(data);\r\n      //toastSuccess('Contact retrieved');\r\n    } catch (error) {\r\n      console.log(error);\r\n      toastError(error.message);\r\n    }\r\n  };\r\n\r\n  const selectImage = () => {\r\n    inputRef.current.click();\r\n  };\r\n\r\n  const udpatePhoto = async (file) => {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file, file.name);\r\n      formData.append(\"id\", id);\r\n      await updateImage(formData);\r\n      setContact((prev) => ({\r\n        ...prev,\r\n        photoUrl: `${prev.photoUrl}?updated_at=${new Date().getTime()}`,\r\n      }));\r\n      toastSuccess(\"Photo updated\");\r\n    } catch (error) {\r\n      console.log(error);\r\n      toastError(error.message);\r\n    }\r\n  };\r\n\r\n  const onChange = (event) => {\r\n    setContact({ ...contact, [event.target.name]: event.target.value });\r\n  };\r\n\r\n  const onUpdateContact = async (event) => {\r\n    event.preventDefault();\r\n    await updateContact(contact);\r\n    fetchContact(id);\r\n    toastSuccess(\"Contact Updated\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchContact(id);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Link to={\"/contacts\"} className=\"link\">\r\n        <i className=\"bi bi-arrow-left\"></i> Back to list\r\n      </Link>\r\n      <div className=\"profile\">\r\n        <div className=\"profile__details\">\r\n          <img\r\n            src={contact.photoUrl}\r\n            alt={`Profile photo of ${contact.name}`}\r\n          />\r\n          <div className=\"profile__metadata\">\r\n            <p className=\"profile__name\">{contact.name}</p>\r\n            <p className=\"profile__muted\">JPG, GIF, or PNG. Max size of 10MG</p>\r\n            <button onClick={selectImage} className=\"btn\">\r\n              <i className=\"bi bi-cloud-upload\"></i> Change Photo\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"profile__settings\">\r\n          <div>\r\n            <form onSubmit={onUpdateContact} className=\"form\">\r\n              <div className=\"user-details\">\r\n                <input\r\n                  type=\"hidden\"\r\n                  defaultValue={contact.id}\r\n                  name=\"id\"\r\n                  required\r\n                />\r\n                <div className=\"input-box\">\r\n                  <span className=\"details\">Name</span>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={contact.name}\r\n                    onChange={onChange}\r\n                    name=\"name\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div className=\"input-box\">\r\n                  <span className=\"details\">Email</span>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={contact.email}\r\n                    onChange={onChange}\r\n                    name=\"email\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div className=\"input-box\">\r\n                  <span className=\"details\">Phone</span>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={contact.phone}\r\n                    onChange={onChange}\r\n                    name=\"phone\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div className=\"input-box\">\r\n                  <span className=\"details\">Address</span>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={contact.address}\r\n                    onChange={onChange}\r\n                    name=\"address\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div className=\"input-box\">\r\n                  <span className=\"details\">Title</span>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={contact.title}\r\n                    onChange={onChange}\r\n                    name=\"title\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div className=\"input-box\">\r\n                  <span className=\"details\">Status</span>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={contact.status}\r\n                    onChange={onChange}\r\n                    name=\"status\"\r\n                    required\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"form_footer\">\r\n                <button type=\"submit\" className=\"btn\">\r\n                  Save\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <form style={{ display: \"none\" }}>\r\n        <input\r\n          type=\"file\"\r\n          ref={inputRef}\r\n          onChange={(event) => udpatePhoto(event.target.files[0])}\r\n          name=\"file\"\r\n          accept=\"image/*\"\r\n        />\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ContactDetail;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}